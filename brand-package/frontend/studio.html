<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brand Studio - Generator</title>
    <div class="user-menu">
      <span id="user-email"></span>
      <button id="logout-btn" class="logout-btn">Logout</button>
    </div>
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="/src/styles/style.css">
    <link rel="stylesheet" href="/src/styles/studio.css">
    <link rel="stylesheet" href="/src/styles/studio-new.css">
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
        <div class="toggle-track">
            <div class="toggle-thumb"></div>
        </div>
    </button>
    
    <!-- Studio Wrapper - Three Panels -->
    <div class="studio-wrapper">
        
        <!-- LEFT PANEL - Progress & Navigation -->
        <aside class="panel glass-panel left-panel">
            <div class="panel-header">
                <img class="logo-img-small" id="studio-logo" src="/logo-light.svg" alt="Logo">
            </div>
            
            <!-- Progress Indicator -->
            <div class="progress-section">
                <h4>Progress</h4>
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" style="width: 0%"></div>
                </div>
                
                <div class="breadcrumb-nav" id="breadcrumb-nav">
                    <!-- Dynamically populated -->
                </div>
            </div>
            
            <!-- Session Info -->
            <div class="session-section">
                <h4>Session</h4>
                <div class="session-info">
                    <div class="info-row">
                        <span class="info-label">Started:</span>
                        <span class="info-value" id="session-start">--</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Last saved:</span>
                        <span class="info-value" id="session-saved">--</span>
                    </div>
                </div>
                <div class="user-menu">
                <span id="user-email" style="font-size: 12px; color: #666;"></span>
                <button id="logout-btn" style="
                    margin-top: 10px;
                    padding: 8px 12px;
                    background: rgba(255,59,48,0.1);
                    color: #ff3b30;
                    border: 1px solid rgba(255,59,48,0.3);
                    border-radius: 6px;
                    cursor: pointer;
                    width: 100%;
                ">Logout</button>
                </div>
            </div>
            
            <!-- Current Selections -->
            <div class="selections-section" id="selections-section">
                <h4>Your Selections</h4>
                <div class="selections-list" id="selections-list">
                    <!-- Dynamically populated -->
                </div>
            </div>
            
            <!-- Navigation Buttons -->
            <div class="left-panel-actions">
                <button id="save-session-btn" class="nav-btn">
                    ðŸ’¾ Save Draft
                </button>
                
                <!-- NEW SESSION MANAGEMENT BUTTONS -->
                <button id="new-session-btn" class="secondary-btn">
                    ðŸ†• New Session  
                </button>
                
                <button id="view-history-btn" class="secondary-btn">
                    ðŸ“‹ View History
                </button>
            </div>
        </aside>
        
        <!-- MIDDLE PANEL - Main Content -->
        <main class="panel glass-panel middle-panel">
            <!-- Content will be dynamically rendered here -->
            <div class="loading-initial">
                <div class="loading-spinner"></div>
                <p>Loading studio...</p>
            </div>
        </main>
        
        <!-- RIGHT PANEL - Preview -->
        <aside class="panel glass-panel right-panel">
            <div class="preview-header">
                <h3>Preview</h3>
            </div>
            
            <div class="preview-content">
                <div class="preview-placeholder">
                    <div class="placeholder-icon">ðŸŽ¨</div>
                    <p>Your brand preview will appear here</p>
                </div>
            </div>
        </aside>
        
    </div>
    
    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- Global Loader -->
    <div id="global-loader" class="global-loader hidden">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <h3 id="loader-message">Loading...</h3>
            <p id="loader-tip"></p>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="loader-progress"></div>
            </div>
            <p id="loader-time"></p>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script type="module" src="/src/main.ts"></script>
</body>
</html>